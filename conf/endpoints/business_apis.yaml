paths:
  - path: "/api/v1/payment/status"
    method: "POST"
    description: "Returns different payment results based on order_id and user_type"

    selectors:
      - name: "order_id"
        type: "body"
        key: "0.order_id"
      - name: "user_type"
        type: "header"
        key: "X-User-Type"

    rules:
      - conditions:
          - selector: "order_id"
            match_type: "exact"
            value: "1001"
        response_file: "./conf/mocks/payment/success.json"
        status_code: 200

      - conditions:
          - selector: "order_id"
            match_type: "exact"
            value: "1002"
        response_file: "./conf/mocks/payment/failed.json"
        status_code: 400

      - conditions:
          - selector: "order_id"
            match_type: "regex"
            value: "^ERR_[0-9]{4}$"
        response_file: "./conf/mocks/payment/error_order.json"
        status_code: 400

      - conditions:
          - selector: "order_id"
            match_type: "prefix"
            value: "VIP_"
          - selector: "user_type"
            match_type: "exact"
            value: "premium"
        response_file: "./conf/mocks/payment/vip_success.json"
        status_code: 200
        headers:
          X-VIP-Status: "active"
          X-Priority: "high"

    default:
      response_file: "./conf/mocks/payment/default.json"
      status_code: 200
      headers:
        X-Mock-Server: "true"

  - path: "/api/v1/user/:user_id"
    method: "GET"
    description: "Returns user info based on user_id and type"

    selectors:
      - name: "user_id"
        type: "path"
        key: "user_id"
      - name: "user_type"
        type: "query"
        key: "type"

    rules:
      - conditions:
          - selector: "user_type"
            match_type: "exact"
            value: "admin"
        response_file: "./conf/mocks/user/admin.json"
        status_code: 200

      - conditions:
          - selector: "user_id"
            match_type: "range"
            value: "[1, 100]"
        response_file: "./conf/mocks/user/test_user.json"
        status_code: 200

    default:
      response_file: "./conf/mocks/user/guest.json"
      status_code: 200

  - path: "/api/v1/order/:order_id"
    method: "GET"
    description: "Returns order details with dynamic template"

    selectors:
      - name: "order_id"
        type: "path"
        key: "order_id"

    rules: []

    default:
      response_file: "./conf/mocks/order/detail_template.json"
      status_code: 200
      template:
        enabled: true
        variables:
          - "{{.order_id}}"
          - "{{.timestamp}}"
          - "{{.uuid}}"

  - path: "/api/v1/random/status"
    method: "GET"
    description: "Returns random responses with weighted probability"

    selectors: []
    rules: []

    default:
      random_responses:
        enabled: true
        files:
          - file: "./conf/mocks/random/success.json"
            weight: 70
            status_code: 200
          - file: "./conf/mocks/random/error.json"
            weight: 20
            status_code: 500
          - file: "./conf/mocks/random/timeout.json"
            weight: 10
            status_code: 504
            delay_ms: 3000
