server:
  port: 8080
  hot_reload: true
  reload_interval_sec: 5
  
  logging:
    level: "debug"
    access_log: true
    log_format: "text"

  error_handling:
    show_details: true
    custom_error_responses:
      404: "./mocks/errors/not_found.json"
      500: "./mocks/errors/internal_error.json"

health_check:
  enabled: true
  path: "/health"

endpoints:


  # ============================================================
  # Holiday API - Check if a date is a holiday
  # ============================================================
  - path: "/is_holiday"
    method: "GET"
    description: "Returns whether a given date is a holiday"

    selectors:
      - name: "date"
        type: "query"
        key: "date"

    rules:
      # Specific holidays
      - conditions:
          - selector: "date"
            match_type: "exact"
            value: "2026-01-01"
        response_file: "./mocks/holiday/is_holiday_true.json"
        status_code: 200

      - conditions:
          - selector: "date"
            match_type: "exact"
            value: "2026-05-01"
        response_file: "./mocks/holiday/is_holiday_true.json"
        status_code: 200

      - conditions:
          - selector: "date"
            match_type: "exact"
            value: "2026-10-01"
        response_file: "./mocks/holiday/is_holiday_true.json"
        status_code: 200
    default:
      response_file: "./mocks/holiday/is_holiday_false.json"
      status_code: 200

  # Example 1: Payment status endpoint (multi-condition + regex)
  - path: "/api/v1/payment/status"
    method: "POST"
    description: "Returns different payment results based on order_id and user_type"
    
    selectors:
      - name: "order_id"
        type: "body"
        key: "order_id"
      - name: "user_type"
        type: "header"
        key: "X-User-Type"
    
    rules:
      # Exact match
      - conditions:
          - selector: "order_id"
            match_type: "exact"
            value: "1001"
        response_file: "./mocks/payment/success.json"
        status_code: 200
        
      # Another exact match
      - conditions:
          - selector: "order_id"
            match_type: "exact"
            value: "1002"
        response_file: "./mocks/payment/failed.json"
        status_code: 400
        
      # Regex match for error orders
      - conditions:
          - selector: "order_id"
            match_type: "regex"
            value: "^ERR_[0-9]{4}$"
        response_file: "./mocks/payment/error_order.json"
        status_code: 400
        
      # Multi-condition: VIP prefix + premium user
      - conditions:
          - selector: "order_id"
            match_type: "prefix"
            value: "VIP_"
          - selector: "user_type"
            match_type: "exact"
            value: "premium"
        response_file: "./mocks/payment/vip_success.json"
        status_code: 200
        headers:
          X-VIP-Status: "active"
          X-Priority: "high"

    default:
      response_file: "./mocks/payment/default.json"
      status_code: 200
      headers:
        X-Mock-Server: "true"

  # Example 2: User info with path parameter
  - path: "/api/v1/user/:user_id"
    method: "GET"
    description: "Returns user info based on user_id and type"
    
    selectors:
      - name: "user_id"
        type: "path"
        key: "user_id"
      - name: "user_type"
        type: "query"
        key: "type"
    
    rules:
      - conditions:
          - selector: "user_type"
            match_type: "exact"
            value: "admin"
        response_file: "./mocks/user/admin.json"
        status_code: 200
        
      # Range match example
      - conditions:
          - selector: "user_id"
            match_type: "range"
            value: "[1, 100]"
        response_file: "./mocks/user/test_user.json"
        status_code: 200
        
    default:
      response_file: "./mocks/user/guest.json"
      status_code: 200

  # Example 3: Order details with template
  - path: "/api/v1/order/:order_id"
    method: "GET"
    description: "Returns order details with dynamic template"
    
    selectors:
      - name: "order_id"
        type: "path"
        key: "order_id"
    
    rules: []
    
    default:
      response_file: "./mocks/order/detail_template.json"
      status_code: 200
      template:
        enabled: true
        variables:
          - "{{.order_id}}"
          - "{{.timestamp}}"
          - "{{.uuid}}"

  # Example 4: Random response endpoint
  - path: "/api/v1/random/status"
    method: "GET"
    description: "Returns random responses with weighted probability"
    
    selectors: []
    rules: []
    
    default:
      random_responses:
        enabled: true
        files:
          - file: "./mocks/random/success.json"
            weight: 70
            status_code: 200
          - file: "./mocks/random/error.json"
            weight: 20
            status_code: 500
          - file: "./mocks/random/timeout.json"
            weight: 10
            status_code: 504
            delay_ms: 3000
